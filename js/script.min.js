var write=document.querySelector(".write-to-us"),popup=document.querySelector(".popup"),close=popup.querySelector(".modal-close"),form=popup.querySelector("form"),nick=popup.querySelector("[name=name]"),mail=popup.querySelector("[name=email]"),sliderControl1=document.querySelector(".slider-controls i:first-child"),sliderControl2=document.querySelector(".slider-controls i:nth-child(2)"),sliderControl3=document.querySelector(".slider-controls i:last-child"),sliders=document.querySelectorAll(".features"),isStorageSupport=!0,storage="";function clearSelection(){for(var e=document.querySelectorAll(".slider-controls i"),o=0;o<e.length;o++)e[o].classList.remove("active-element"),sliders[o].classList.remove("active-slide")}function setActiveSlide(e){clearSelection(),1==e&&(sliderControl1.classList.add("active-element"),sliders[0].classList.add("active-slide")),2==e&&(sliderControl2.classList.add("active-element"),sliders[1].classList.add("active-slide")),3==e&&(sliderControl3.classList.add("active-element"),sliders[2].classList.add("active-slide"))}sliderControl1&&sliderControl1.addEventListener("click",function(e){setActiveSlide(1)}),sliderControl1&&sliderControl2.addEventListener("click",function(e){setActiveSlide(2)}),sliderControl1&&sliderControl3.addEventListener("click",function(e){setActiveSlide(3)});try{storage=localStorage.getItem("nick")}catch(e){isStorageSupport=!1}write.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("popup-show"),storage?(nick.value=storage,mail.focus()):nick.focus(),console.log("focus")}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("popup-show"),popup.classList.remove("popup-error")}),form.addEventListener("submit",function(e){nick.value&&mail.value?isStorageSupport&&localStorage.setItem("nick",nick.value):(e.preventDefault(),popup.classList.remove("popup-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("popup-error"),console.log("Нужно ввести логин и пароль"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("popup-show")&&(popup.classList.remove("popup-show"),popup.classList.remove("popup-error")))});